{"version":3,"sources":["webpack:///./src/components/login/index.vue?f17a","webpack:///./src/components/login/index.vue?a2e8","webpack:///src/components/login/index.vue","webpack:///./src/components/login/index.vue?4808","webpack:///./src/components/login/index.vue?f54c"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","close","_v","_m","directives","name","rawName","value","expression","attrs","domProps","$event","target","composing","phoneNum","timeCode","getCode","_s","code","captcha","captchaUrl","reloadCaptcha","_e","signUp","staticRenderFns","data","service","needCaptcha","methods","$router","go","readloadCaptcha","countTimeCode","clearFlag","setInterval","clearInterval","beforeDestroy","component"],"mappings":"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","file":"static/js/chunk-42494b2c.054fa3c6.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=49c29586&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=49c29586&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"close\",on:{\"click\":_vm.close}}),_c('p',{staticClass:\"title\"},[_vm._v(\"手机号登录\")]),_c('div',{staticClass:\"weui-cell weui-cell_vcode\"},[_vm._m(0),_c('div',{staticClass:\"weui-cell__bd\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.phoneNum),expression:\"phoneNum\"}],staticClass:\"weui-input\",attrs:{\"maxlength\":\"11\",\"type\":\"tel\",\"pattern\":\"^\\\\d{11}$\",\"placeholder\":\"请输入手机号\"},domProps:{\"value\":(_vm.phoneNum)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.phoneNum=$event.target.value}}})]),_c('div',{staticClass:\"weui-cell__ft\"},[_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.timeCode == 60),expression:\"timeCode == 60\"}],staticClass:\"weui-vcode-btn\",on:{\"click\":_vm.getCode}},[_vm._v(\"获取验证码\")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.timeCode != 60),expression:\"timeCode != 60\"}],staticClass:\"time-code weui-vcode-btn\"},[_vm._v(_vm._s(_vm.timeCode)+\"s\")])])]),_c('div',{staticClass:\"weui-cell weui-cell_vcode vcode-input scale-1px\"},[_vm._m(1),_c('div',{staticClass:\"weui-cell__bd\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.code),expression:\"code\"}],staticClass:\"weui-input\",attrs:{\"type\":\"number\",\"placeholder\":\"请输入验证码\"},domProps:{\"value\":(_vm.code)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.code=$event.target.value}}})])]),(_vm.needCaptcha)?_c('div',{staticClass:\"weui-cell weui-cell_vcode captcha-code\"},[_vm._m(2),_c('div',{staticClass:\"weui-cell__bd\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.captcha),expression:\"captcha\"}],staticClass:\"weui-input\",attrs:{\"type\":\"number\",\"placeholder\":\"请输入验证码\"},domProps:{\"value\":(_vm.captcha)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.captcha=$event.target.value}}})]),_c('div',{staticClass:\"weui-cell__ft\"},[_c('img',{staticClass:\"weui-vcode-img\",attrs:{\"src\":_vm.captchaUrl},on:{\"click\":_vm.reloadCaptcha}})])]):_vm._e(),_c('a',{staticClass:\"weui-btn weui-btn_primary\",attrs:{\"href\":\"javascript:\"},on:{\"click\":_vm.signUp}},[_vm._v(\"确定\")])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"weui-cell__hd\"},[_c('label',{staticClass:\"weui-label\"},[_vm._v(\"手机号\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"weui-cell__hd\"},[_c('label',{staticClass:\"weui-label\"},[_vm._v(\"验证码\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"weui-cell__hd\"},[_c('label',{staticClass:\"weui-label\"},[_vm._v(\"图形验证码\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container\">\n    <div class=\"close\" @click=\"close\"></div>\n    <p class=\"title\">手机号登录</p>\n    <div class=\"weui-cell weui-cell_vcode\">\n        <div class=\"weui-cell__hd\">\n            <label class=\"weui-label\">手机号</label>\n        </div>\n        <div class=\"weui-cell__bd\">\n            <input class=\"weui-input\" maxlength=\"11\" type=\"tel\" pattern=\"^\\d{11}$\" placeholder=\"请输入手机号\" v-model=\"phoneNum\">\n        </div>\n        <div class=\"weui-cell__ft\">\n            <button v-show=\"timeCode == 60\" class=\"weui-vcode-btn\" @click=\"getCode\">获取验证码</button>\n            <div v-show=\"timeCode != 60\" class=\"time-code weui-vcode-btn\">{{timeCode}}s</div>\n        </div>\n    </div>\n\n    <div class=\"weui-cell weui-cell_vcode vcode-input scale-1px\">\n        <div class=\"weui-cell__hd\"><label class=\"weui-label\">验证码</label></div>\n        <div class=\"weui-cell__bd\">\n            <input v-model=\"code\" class=\"weui-input\" type=\"number\" placeholder=\"请输入验证码\">\n        </div>\n    </div>\n\t<div v-if=\"needCaptcha\" class=\"weui-cell weui-cell_vcode captcha-code\">\n        <div class=\"weui-cell__hd\"><label class=\"weui-label\">图形验证码</label></div>\n        <div class=\"weui-cell__bd\">\n            <input v-model=\"captcha\" class=\"weui-input\" type=\"number\" placeholder=\"请输入验证码\"/>\n        </div>\n        <div class=\"weui-cell__ft\">\n            <img class=\"weui-vcode-img\" :src=\"captchaUrl\" @click=\"reloadCaptcha\"/>\n        </div>\n    </div>\n    <a class=\"weui-btn weui-btn_primary\" href=\"javascript:\" @click=\"signUp\">确定</a>\n  </div>\n</template>\n<script>\nimport service from '@/util/service'\nexport default {\n  name: 'login',\n  data () {\n    return {\n      phoneNum: '',\n      timeCode: 60,\n      code: '',\n      captcha: '',\n      captchaUrl: service.baseURL + 'users/captcha',\n      needCaptcha: false // getCookie('captcha') || false\n    }\n  },\n  methods: {\n    close () {\n      this.$router.go(-1)\n    },\n    async getCode () {\n      // 验证手机号是否合法\n      if (!/^\\d{11}$/.test(this.phoneNum)) {\n        weui.topTips('请输入正确手机号')\n        return\n      }\n      if (this.phoneNum) {\n        // 发送获取验证码请求\n        let resp = await service.get('/users/phonecode', {\n          phoneNum: this.phoneNum\n        })\n\n        if (resp.code === 0) {\n          weui.toast('验证码已发送', 1000)\n          // 动态倒计时\n          this.countTimeCode()\n        }\n      }\n    },\n    async signUp () {\n      if (this.phoneNum && this.code) {\n        if (!/^\\d{11}$/.test(this.phoneNum)) {\n          weui.topTips('请输入正确手机号')\n          return\n        }\n      }\n      let resp = await service.post('users/signup', {\n        phonenum: this.phoneNum,\n        code: this.code,\n        captcha: this.captcha\n      })\n      if (resp.code === 0) {\n        if (resp.data.code === 'needCaptcha') {\n          this.needCaptcha = true\n          weui.topTips('操作频繁，请输入图形验证码')\n          return\n        }\n        // 登录成功后，将当前用户的数据存入store，以便后续使用\n        this.$store.dispatch('setUser', resp.data)\n        this.$router.go(-1)\n      } else {\n        weui.topTips('请输入验证码或手机号码')\n      }\n    },\n    // 刷新验证码\n    readloadCaptcha () {\n      this.captchaUrl = service.baseURL + 'users/captcha?' + Date.now()\n    },\n    countTimeCode () {\n      this.clearFlag = setInterval(() => {\n        // 倒计时结束后，重制标志位\n        if (this.timeCode == 0) {\n          this.timeCode = 60\n          clearInterval(this.clearFlag)\n          return\n        }\n        // 秒数每次减1\n        this.timeCode--\n      }, 1000)// 1s调用1次\n    }\n  },\n  beforeDestroy () {\n    clearInterval(this.clearFlag)\n  }\n\n}\n</script>\n<style scoped>\n.container {\n  padding-top: 150px;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: #fff;\n  z-index: 999;\n  overflow: hidden;\n}\n.title {\n  text-align: left;\n  padding-left: 40px;\n  font-size: 23px;\n  margin-bottom: 32px;\n}\n.weui-vcode-btn {\n  border:none;\n}\n.vcode-input {\n  height: 45px;\n}\n.captcha-code {\n  height: 45px;\n}\n.captcha-code::before {\n  display: none;\n}\n.scale-1px::after {\n  left: 16px;\n  content: \" \";\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  height: 1px;\n  border-bottom: 1px solid rgba(0,0,0,.1);\n  color: rgba(0,0,0,.1);\n  -webkit-transform-origin: 0 0;\n  transform-origin: 0 0;\n  -webkit-transform: scaleY(.5);\n  transform: scaleY(.5);\n  z-index: 2;\n}\n.weui-btn {\n  margin: 0 auto;\n  margin-top: 59px;\n}\n.close {\n  width: 25px;\n  height: 25px;\n  position: absolute;\n  top: 8px;\n  left: 8px;\n  background-size: contain;\n  background-image: url('./img/close.png');\n}\n.time-code {\n  width: 100px;\n  text-align: center;\n  color: #ccc;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=49c29586&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=49c29586&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"49c29586\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}