(function(t){function e(e){for(var a,i,o=e[0],c=e[1],u=e[2],l=0,d=[];l<o.length;l++)i=o[l],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&d.push(s[i][0]),s[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);h&&h(e);while(d.length)d.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,i=1;i<n.length;i++){var o=n[i];0!==s[o]&&(a=!1)}a&&(r.splice(e--,1),t=c(c.s=n[0]))}return t}var a={},i={app:0},s={app:0},r=[];function o(t){return c.p+"static/js/"+({}[t]||t)+"."+{"chunk-0d688173":"360de261","chunk-3e9fd838":"6a930b4d","chunk-42494b2c":"054fa3c6","chunk-e4dda812":"57c1930f","chunk-fc586510":"3e052457"}[t]+".js"}function c(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(t){var e=[],n={"chunk-0d688173":1,"chunk-3e9fd838":1,"chunk-42494b2c":1,"chunk-e4dda812":1,"chunk-fc586510":1};i[t]?e.push(i[t]):0!==i[t]&&n[t]&&e.push(i[t]=new Promise((function(e,n){for(var a="static/css/"+({}[t]||t)+"."+{"chunk-0d688173":"e41ce5f7","chunk-3e9fd838":"672a767c","chunk-42494b2c":"30c408b7","chunk-e4dda812":"a4904426","chunk-fc586510":"da41c896"}[t]+".css",s=c.p+a,r=document.getElementsByTagName("link"),o=0;o<r.length;o++){var u=r[o],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===a||l===s))return e()}var d=document.getElementsByTagName("style");for(o=0;o<d.length;o++){u=d[o],l=u.getAttribute("data-href");if(l===a||l===s)return e()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=e,h.onerror=function(e){var a=e&&e.target&&e.target.src||s,r=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=a,delete i[t],h.parentNode.removeChild(h),n(r)},h.href=s;var p=document.getElementsByTagName("head")[0];p.appendChild(h)})).then((function(){i[t]=0})));var a=s[t];if(0!==a)if(a)e.push(a[2]);else{var r=new Promise((function(e,n){a=s[t]=[e,n]}));e.push(a[2]=r);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=o(t);var d=new Error;u=function(e){l.onerror=l.onload=null,clearTimeout(h);var n=s[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",d.name="ChunkLoadError",d.type=a,d.request=i,n[1](d)}s[t]=void 0}};var h=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(e)},c.m=t,c.c=a,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)c.d(n,a,function(e){return t[e]}.bind(null,a));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/",c.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var d=0;d<u.length;d++)e(u[d]);var h=l;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"050d":function(t,e,n){},"0658":function(t,e,n){"use strict";var a=n("8e70"),i=n.n(a);i.a},"0b17":function(t,e,n){},1:function(t,e){},2488:function(t,e,n){t.exports=n.p+"static/img/missing_face.26b092ed.png"},2716:function(t,e,n){"use strict";var a=n("8cff"),i=n.n(a);i.a},"2a42":function(t,e,n){},"35a1":function(t,e,n){},3778:function(t,e,n){"use strict";var a=n("ec3f"),i=n.n(a);i.a},"37b0":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));n("4917"),n("3b2b");function a(t){var e,n=new RegExp("(^| )"+t+"=([^;]*)(;|$)");return document.cookie.match(n)?(e=document.cookie.match(n),e[2]):null}},"41cb":function(t,e,n){"use strict";var a,i=n("2b0e"),s=n("8c4f"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"header"},[n("div",{staticClass:"cancel",on:{click:t.cancel}},[t._v("取消")]),n("div",{staticClass:"create weui-btn weui-btn_mini weui-btn_primary",on:{click:t.publish}},[t._v("发表")])]),n("div",{staticClass:"input-content"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"weui-textarea",attrs:{placeholder:"这一刻的想法..",maxlength:"70"},domProps:{value:t.content},on:{input:[function(e){e.target.composing||(t.content=e.target.value)},t.oninput]}}),n("div",{staticClass:"weui-textarea-counter"},[n("span",[t._v(t._s(this.textCount))]),t._v("/70\n\t\t\t")])]),n("ul",{staticClass:"img-content"},[n("div",{attrs:{id:"uploaderPub"}},[n("div",{staticClass:"weui-uploader"},[n("div",{staticClass:"weui-uploader__bd"},[n("ul",{staticClass:"weui-uploader__files",attrs:{id:"uploaderFiles"},on:{click:function(e){return t.showImg(e)}}}),t._m(0)]),n("div",{staticClass:"weui-uploader__hd"},[n("div",{staticClass:"weui-uploader__info"},[n("span",{attrs:{id:"uploadCount"}},[t._v(t._s(t.uploadCount))]),t._v("/5\n\t\t\t\t\t\t")])])])])])])},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"weui-uploader__input-box"},[n("input",{staticClass:"weui-uploader__input",attrs:{id:"uploaderInputPub",type:"file",accept:"image/*",multiple:"multiple"}})])}],c=(n("96cf"),n("3b8d")),u=(n("4917"),n("a481"),n("c40d")),l=n("37b0"),d={name:"publish",data:function(){return{uploadCount:0,content:"",textCount:0,picList:[]}},mounted:function(){var t=this;weui.uploader("#uploaderPub",{url:u["a"].baseURL+"post/uploadimgaliyun",auto:!0,type:"file",fileVal:"image",compress:{width:1300,height:1300,quality:.8},onBeforeQueued:function(e){return["image/jpg","image/jpeg","image/png","image/gif"].indexOf(this.type)<0?(weui.alert("请上传图片"),!1):this.size>10485760?(weui.alert("请上传不超过10M的图片"),!1):e.length>5?(weui.alert("最多只能上传5张图片,请重新选择"),!1):t.uploadCount+1>5?(weui.alert("最多只能上传5张图片"),!1):void++t.uploadCount},onBeforeSend:function(t,e){e["wec-access-token"]=Object(l["a"])("token")},onProgress:function(t){},onSuccess:function(e){e.data.id=this.id,t.picList.push(e.data)},onError:function(){}})},methods:{oninput:function(){this.textCount=this.content.length},showImg:function(t){var e=this,n=t.target;if(n.classList.contains("weui-uploader__file"))var a=n.getAttribute("style").match(/url\((.*?)\)/)[1].replace(/"/g,""),i=weui.gallery(a,{onDelete:function(){e.deleteImg(n,i)}})},cancel:function(){this.$router.go(-1)},deleteImg:function(t,e){var n=t.getAttribute("data-id");confirm("确定删除该图片?");for(var a=0,i=this.picList.length;a<i;++a){var s=this.picList[a];if(s.id==n){this.picList.splice(a-1,1);break}}t.remove(),e.hide(),this.uploadCount--},publish:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.content){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,u["a"].post("post/savepost",{content:this.content,picList:this.picList});case 4:e=t.sent,0===e.code&&(this.$router.go(-1),this.$router.justPub=!0);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},h=d,p=(n("fd42"),n("2877")),f=Object(p["a"])(h,r,o,!1,null,"0fa0670e",null),m=f.exports,g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("pullRefreshView",{on:{onRefresh:t.onRefresh}},[n("headerbar"),n("div",{staticClass:"top-img",style:t.topImgStyle,on:{click:t.changeBg}}),n("div",{staticStyle:{display:"none"},attrs:{id:"uploaderBg"}},[n("input",{ref:"uploaderBg",staticClass:"weui-uploader__input",attrs:{id:"uploaderInput",type:"file",accept:"image/*"}})]),n("div",{staticClass:"name-info"},[n("p",{staticClass:"nickname"}),n("img",{staticClass:"avatar",attrs:{alt:"avatar",src:t.myAvatar},on:{click:t.gotoMyPage}})]),n("list",{ref:"list"}),t.iosInput?n("div",{ref:"inputBarWrap",staticClass:"input-wrap ios",style:{zIndex:t.showInput?"999":"-1",opacity:t.showInput?"1":"0"}},[n("inputBar",{ref:"inputBar",attrs:{option:t.inputBarOption},on:{publish:t.publish}})],1):t._e(),t.androidInput?n("div",{ref:"inputBarWrap",staticClass:"input-wrap android",style:{opacity:t.showInput?"1":"0",bottom:t.showInput?"0":"-60px"}},[n("inputBar",{ref:"inputBar",attrs:{option:t.inputBarOption},on:{publish:t.publish}})],1):t._e()],1),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showPWA,expression:"showPWA"}],staticClass:"add-screen",on:{click:function(e){t.showPWA=!1}}})],1)},v=[],w=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"list-content",on:{touchstart:function(e){return t.touchstart(e)}}},[n("scrollView",{attrs:{isend:t.isend,readyToLoad:t.readyToLoad},on:{loadCallback:t.loadCallback,scroll:t.scroll}},[n("ul",t._l(t.dataList,(function(t,e){return n("li",{key:e},[n("postItem",{attrs:{data:t}})],1)})),0)])],1)},_=[],k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"item scale-1px"},[n("div",{class:t.data.user.params&&1==t.data.user.params.vip?"avatar-wrap vip":"avatar-wrap"},[n("img",{staticClass:"avatar",attrs:{src:t.data.avatar,alt:"avatar"},on:{click:function(e){return t.goPersonPage(t.data.user._id)}}})]),n("div",{staticClass:"content-info"},[n("p",{staticClass:"nickname one-line"},[t._v(t._s(t.data.nickname))]),n("div",{staticClass:"post-content three-line"},[t._v(t._s(t.data.content))]),t.data.piclist&&t.data.piclist.length>1?n("div",{staticClass:"img-content"},t._l(t.data.piclist,(function(e,a){return n("div",{key:a,staticClass:"img-wrap",style:t.imgWrapStyle(e),on:{click:function(e){return t.showImage(a)}}})})),0):t._e(),t.data.piclist&&1===t.data.piclist.length?n("div",{staticClass:"img-content-one"},[n("img",{staticClass:"img-wrap-one",style:t.imgOneStyle(t.data.piclist[0]),attrs:{src:t.getImageUrl(t.data.piclist[0].url)},on:{click:function(e){return t.showImage()}}})]):t._e(),n("div",{staticClass:"time"},[t._v(t._s(t.data.time))]),n("div",{staticClass:"opera-box",on:{click:function(e){return t.showPanel(e)}}},[n("transition",{attrs:{name:"slide"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showOpera,expression:"showOpera"}],staticClass:"box-panel-wrap"},[n("div",{staticClass:"box-panel"},[n("div",{staticClass:"like-box",on:{click:t.dealWithLike}},[n("div",{staticClass:"like-icon"}),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.data.isLike,expression:"!data.isLike"}],staticClass:"like-text"},[t._v("赞")]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.data.isLike,expression:"data.isLike"}],staticClass:"like-text"},[t._v("取消")])]),n("div",{staticClass:"divider"}),n("div",{staticClass:"comment-box",on:{click:function(e){return t.addComment(e)}}},[n("div",{staticClass:"comment-icon"}),n("div",{staticClass:"comment-text"},[t._v("评论")])])])])])],1),n("div",{directives:[{name:"show",rawName:"v-show",value:t.data.likes.length||t.data.comments.length,expression:"data.likes.length || data.comments.length"}],staticClass:"comment-list"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.data.likes.length,expression:"data.likes.length"}],staticClass:"like-content"},[n("div",{staticClass:"like-heart-icon"}),t._l(t.data.likes,(function(e,a){return n("span",{key:e.user._id,staticClass:"like-nickname",on:{click:function(n){return t.goPersonPage(e.user._id,a)}}},[t._v("\n\t\t\t\t\t"+t._s(t._f("likeFilter")(e.user.nickname,a,t.data.likes.length))+"\n\t\t\t\t  ")])}))],2),t._l(t.data.comments,(function(e,a){return n("div",{directives:[{name:"show",rawName:"v-show",value:t.data.comments.length,expression:"data.comments.length"}],key:a,staticClass:"comment-item scale-1px-top"},[n("div",{staticClass:"comment-nickname one-line",on:{click:function(n){return t.goPersonPage(e.user._id)}}},[t._v("\n\t\t\t\t\t"+t._s(e.user.nickname)+":\n\t\t\t\t")]),n("div",[t._v(t._s(e.content))])])}))],2)])])},C=[],y={name:"postItem",props:{data:Object},data:function(){return{showOpera:!1}},filters:{likeFilter:function(t,e,n){return e===n-1?t:t+","},urlFilter:function(t){var e=t+"?x-oss-process=image/resize,I_400";return e}},computed:{closeCLPanelFlag:function(){return this.$store.state.closeCLPanelFlag},imgWrapStyle:function(){var t=this;return function(e){t.getImageUrl(e.url)}},imgOneStyle:function(){var t=this;return function(e){var n=null,a=null;return e.size.height>e.size.width?(n=Math.min(200,e.size.height),a=n*e.size.width/e.size.height):(a=Math.min(200,e.size.width),n=a*e.size.height/e.size.width),{height:t.pixtovw(n),width:t.pixtovw(a)}}}},watch:{closeCLPanelFlag:function(t){t&&(this.showOpera=!1)}},methods:(a={goPersonPage:function(t){var e=t;e===this.$store.state.currentUser._id||this.$router.push({path:"personpage",query:{id:e}})},showPanel:function(t){t.target.classList.contains("opera-box")&&(this.showOpera=!this.showOpera,this.$store.dispatch("closeCLPanel",!this.closeCLPanelFlag))},showImage:function(t){for(var e=[],n=0;n<this.data.piclist.length;n++)e.push({img:this.data.piclist[n].url,height:this.data.piclist[n].size.height,width:this.data.piclist[n].size.width});new Slider({list:e,page:t||0})},addComment:function(t){this.data.pageY=t.pageY,this.data.clientY=t.clientY,this.$bus.$emit("showInput",!0,this.data),this.showOpera=!1},dealWithLike:function(){this.data.isLike?this.removeLike():this.addLike()},addLike:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u["a"].post("likecomment/addlike",{postId:this.data.id});case 2:e=t.sent,0===e.code&&(this.$store.dispatch("addLike",{pid:this.data.id,user:this.$store.state.currentUser}),this.showOpera=!1);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),removeLike:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u["a"].post("likecomment/removelike",{postId:this.data.id});case 2:e=t.sent,0===e.code&&(this.$store.dispatch("removeLike",{pid:this.data.id,user:this.$store.state.currentUser}),this.showOpera=!1);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},Object(w["a"])(a,"addComment",(function(t){this.data.pageY=t.pageY,this.data.clientY=t.clientY,this.$bus.$emit("showInput",!0,this.data),this.showOpera=!1})),Object(w["a"])(a,"pixtovw",(function(t){return t/375*100+"vw"})),Object(w["a"])(a,"getImageUrl",(function(t){var e=t+"?x-oss-process=image/resize,l_400";return e})),a)},O=y,$=(n("a967"),Object(p["a"])(O,k,C,!1,null,"6ed03edd",null)),x=$.exports,j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"scrollview"},[t._t("default"),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.readyToLoad,expression:"!readyToLoad"}],staticClass:"weui-loadmore"},[n("i",{staticClass:"weui-loading"}),n("span",{staticClass:"weui-loadmore__tips"},[t._v("正在加载")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isend,expression:"isend"}],staticClass:"weui-loadmore weui-loadmore_line"},[n("span",{staticClass:"weui-loadmore__tips"},[t._v("没有更多了")])])],2)},L=[],I={name:"scrollView",props:{readyToLoad:Boolean,isend:Boolean},data:function(){return{showOpera:!1}},mounted:function(){window.addEventListener("scroll",this.onLoadPage.bind(this))},beforeDestroy:function(){window.removeEventListener("scroll",this.onLoadPage.bind(this))},methods:{onLoadPage:function(){console.log("onLoadPage==="),console.log("clientHeight===");var t=document.documentElement.clientHeight,e=document.body.scrollHeight,n=document.documentElement.scrollTop||document.body.scrollTop;this.$emit("scroll",n);var a=60;if(n+t>=e-a&&!this.isend){if(!this.readyToLoad)return;this.$emit("loadCallback")}}}},P=I,R=Object(p["a"])(P,j,L,!1,null,null,null),S=R.exports,U=n("7b2c"),D={name:"list",components:{postItem:x,scrollView:S},data:function(){return{isend:!1,readyToLoad:!0,pageStart:0,scrollTop:0,lessDataFlag:!1}},computed:{dataList:function(){return this.$store.state.wecircleDataList}},created:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.dataList.length||this.refresh(),this.$router.justPub&&(this.refresh(),this.$router.justPub=!1);case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{scroll:function(t){t<=100?this.$bus.$emit("hideHeader"):this.$bus.$emit("showHeader")},refresh:function(){this.pageStart=0,this.$store.dispatch("setWecircleDataList",{first:!0}),this.fetchData()},touchstart:function(t){t.target.classList.contains("opera-box")||t.target.classList.contains("common-icon")||t.target.classList.contains("common-text")||t.target.classList.contains("like-icon")||t.target.classList.contains("like-text")||(this.$store.dispatch("closeCLPanel",!0),this.$bus.$emit("showInput",!1,this.data))},fetchData:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.readyToLoad=!1,t.next=3,u["a"].get("post/getcirclepost",{pageStart:this.pageStart});case 3:e=t.sent,this.formatData(e.data);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),formatData:function(t){var e=[];t.forEach((function(t){e.push({id:t._id,avatar:t.user.avatar,nickname:t.user.nickname,content:t.content,piclist:t.piclist,comments:t.comments,time:Object(U["a"])(new Date(t.create).getTime()/1e3),isLike:t.isLike,likes:t.likes,user:t.user})})),this.$store.dispatch("setWecircleDataList",e),0===t.length&&(this.isend=!0),0===this.pageStart&&t.length<4&&!this.lessDataFlag&&(this.loadCallback(),this.lessDataFlag=!0),this.readyToLoad=!0},loadCallback:function(){this.pageStart++,this.fetchData()}}},E=D,B=(n("56c8"),Object(p["a"])(E,b,_,!1,null,"750aabea",null)),T=B.exports,N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header-bar scape-1px",class:[t.headerClass]},[n("p",{staticClass:"title"},[t._v("Wecircle")]),n("div",{staticClass:"right-icon",on:{click:t.goPublish}})])},M=[],A={name:"headerbar",mounted:function(){var t=this;this.$bus.$on("showHeader",(function(){t.headerClass="show"})),this.$bus.$on("hideHeader",(function(){t.headerClass=""}))},data:function(){return{headerClass:""}},methods:{goPublish:function(){this.$store.state.currentUser._id?this.$router.push({name:"publish"}):this.$router.push({name:"login"})}}},F=A,H=(n("3778"),Object(p["a"])(F,N,M,!1,null,"1cc51380",null)),z=H.exports,Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pullRefreshView",on:{touchmove:t.touchmove,touchstart:t.touchstart,touchend:t.touchend}},[n("div",{ref:"circleIcon",staticClass:"circle-icon"},[n("div",{ref:"circleIconInner",staticClass:"circle-icon-inner"})]),t._t("default")],2)},W=[],V={name:"pullRefreshView",data:function(){return{pullRefresh:{dragStart:null,percentage:0,dragThreshold:.3,moveCount:200,joinRefreshFlag:null}}},methods:{touchstart:function(t){this.pullRefresh.dragStart=t.targetTouches[0].clientY,this.$refs.circleIcon.style.transition="none"},touchmove:function(t){if(null!==this.pullRefresh.dragStart){var e=t.targetTouches[0];this.pullRefresh.percentage=(this.pullRefresh.dragStart-e.clientY)/window.screen.height;var n=document.documentElement.scrollTop||document.body.scrollTop;if(0===n)if(this.pullRefresh.percentage<0&&t.cancelable){t.preventDefault(),this.pullRefresh.joinRefreshFlag=!0;var a=-this.pullRefresh.percentage*this.pullRefresh.moveCount;if(Math.abs(this.pullRefresh.percentage)<=this.pullRefresh.dragThreshold){var i=Math.ceil(a/30*360);this.$refs.circleIcon.style.transform="translate3d(0,"+a+"px,0) rotate("+i+"deg)"}}else null==this.pullRefresh.joinRefreshFlag&&(this.pullRefresh.joinRefreshFlag=!1);else null==this.pullRefresh.joinRefreshFlag&&(this.pullRefresh.joinRefreshFlag=!1)}},touchend:function(t){var e=this;0!==this.pullRefresh.percentage&&(Math.abs(this.pullRefresh.percentage)<this.pullRefresh.dragThreshold&&this.pullRefresh.joinRefreshFlag?(this.$emit("onRefresh"),this.$refs.circleIconInner.classList.add("circle-rotate"),setTimeout((function(){e.$refs.circleIconInner.classList.remove("circle-rotate"),e.$refs.circleIcon.style.transition="330ms",e.$refs.circleIcon.style.transform="translate3d(0,0,0) rotate(0deg)"}),700)):this.pullRefresh.joinRefreshFlag&&(this.$refs.circleIcon.style.transition="330ms",this.$refs.circleIcon.style.transform="translate3d(0,0,0) rotate(0deg)"),this.pullRefresh.joinRefreshFlag=null,this.pullRefresh.dragStart=null,this.pullRefresh.percentage=0)}}},q=V,K=(n("ba03"),Object(p["a"])(q,Y,W,!1,null,"ab75d04c",null)),J=K.exports,G=n("c732"),Q=n("f298");function X(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function Z(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?X(n,!0).forEach((function(e){Object(w["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var tt={computed:{myAvatar:function(){return this.$store.state.currentUser.avatar||n("2488")},nickname:function(){return this.$store.state.currentUser.nickname||"游客账号"},topImgStyle:function(){var t=this.$store.state.currentUser.bgurl||n("59e9"),e={backgroundImage:"url("+t+")"};return e}},components:{inputBar:G["a"],list:T,headerbar:z,pullRefreshView:J},data:function(){return{inputBarOption:{noplus:!0},showInput:!1,showPWA:!(window.location.href.indexOf("manifest")>-1)&&Q["a"].isIOS,iosInput:Q["a"].isIOS,androidInput:Q["a"].isAndroid}},mounted:function(){var t=this;this.$bus.$on("showInput",(function(e,n){if(t.showInput=e,e&&t.$refs.inputBar&&t.$refs.inputBar.focusInput(n),Q["a"].isIOS)t.$refs.inputBarWrap.style.top=n.pageY+"px",setTimeout((function(){var t=n.pageY-window.keywordHeight-(Q["a"].isIpP?45:5);window.scroll(0,t)}),300);else try{t.$refs.inputBar.blurInput()}catch(a){}}));var e=this;weui.uploader("#uploaderBg",{url:u["a"].baseURL+"post/uploadimg",auto:!0,type:"file",fileVal:"image",compress:{width:1300,height:1300,quality:.8},onBeforeQueued:function(t){return["image/jpg","image/jpeg","image/png","image/gif"].indexOf(this.type)<0?(weui.alert("请上传图片"),!1):this.size>10485760?(weui.alert("请上传不要超过10M的照片"),!1):t.length>1?(weui.alert("最多只能上传一张照片"),!1):void 0},onBeforeSend:function(t,e){e["wec-access-token"]=u["a"].token},onSuccess:function(t){e.submitBg(t)}})},methods:Object(w["a"])({onRefresh:function(){this.$refs.list.refresh()},changeBg:function(){var t=this;weui.actionSheet([{label:"更换图片",onClick:function(){t.$refs.uploaderBg.click()}}],[{label:"取消",onClick:function(){console.log("取消")}}])},pxtovw:function(t){return t/375*1e3+"vw"},publish:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u["a"].post("likecomment/addcomment",{content:e.value,postId:e.data.id});case 2:n=t.sent,0===n.code?(this.$store.dispatch("addComment",{content:e.value,pid:n.data.post,user:this.$store.state.currentUser}),this.showInput=!1):weui.alert("评论失败");case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),submitBg:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u["a"].post("users/update",{userId:this.$store.state.currentUser._id,bgurl:e.data.url});case 2:n=t.sent,0===n.code&&(this.$store.dispatch("setUser",Z({},this.$store.state.currentUser,{bgurl:e.data.url})),weui.toast("修改成功",3e3));case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),gotoMyPage:function(){this.$store.state.currentUser._id?this.$router.push({path:"mypage",name:"mypage",params:{}}):this.$router.push({path:"login",name:"login"})}},"changeBg",(function(){var t=this;weui.actionSheet([{label:"更换图片",onClick:function(){t.$refs.uploaderBg.click()}}],[{label:"取消"}])}))},et=tt,nt=(n("0658"),Object(p["a"])(et,g,v,!1,null,"096221b5",null)),at=nt.exports,it=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("navHeader",{attrs:{title:"个人信息"}}),n("div",{staticClass:"weui-cells content"},[n("div",{staticClass:"panel"},[n("a",{staticClass:"weui-cell weui-cell_access",attrs:{href:"javascript:;"},on:{click:t.changeAvatar}},[n("div",{staticClass:"weui-cell__bd"},[n("p",{staticClass:"name"},[t._v("头像")]),n("div",{staticStyle:{display:"none"},attrs:{id:"uploaderMyAvatar"}},[n("input",{ref:"uploaderInputAvatar",staticClass:"weui-uploader__input",attrs:{type:"file",id:"uploaderInputAvatar",accept:"image/*"}})])]),n("img",{staticClass:"avatar",attrs:{src:t.myUser.avatar,alt:"avatar"}}),n("div",{staticClass:"weui-cell__ft"})]),n("a",{staticClass:"weui-cell weui-cell_access",attrs:{href:"javascript:;"},on:{click:t.goChangeName}},[t._m(0),n("div",{staticClass:"weui-cell__ft"},[t._v(t._s(t.myUser.nickname))])]),n("a",{staticClass:"weui-cell weui-cell_access",attrs:{href:"javascript:;"},on:{click:t.goChangeGender}},[t._m(1),n("div",{staticClass:"weui-cell__ft"},[t._v(t._s(1==t.myUser.gender?"男":"女"))])]),n("a",{staticClass:"weui-cell weui-cell_access",attrs:{href:"javascript:;"}},[t._m(2),n("div",{staticClass:"weui-cell__ft phone"},[t._v(t._s(t.myUser.phoneNum))])]),n("div",{staticClass:"panel"},[n("a",{staticClass:"weui-cell weui-cell_access",attrs:{href:"javascript:;"},on:{click:t.goChat}},[t._m(3),n("div",{staticClass:"weui-cell__ft"})])])])])],1)},st=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"weui-cell__bd"},[n("p",{staticClass:"name"},[t._v("名字")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"weui-cell__bd"},[n("p",{staticClass:"name"},[t._v("性别")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"weui-cell__bd"},[n("p",{staticClass:"name"},[t._v("电话号码")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"weui-cell__bd"},[n("p",{staticClass:"name msg"},[t._v("私信")])])}],rt=n("94ae");function ot(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function ct(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ot(n,!0).forEach((function(e){Object(w["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ot(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ut={name:"mypage",components:{navHeader:rt["a"]},data:function(){return{}},computed:{myUser:function(){return this.$store.state.currentUser}},created:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u["a"].get("users/userinfo",{userId:this.$store.state.currentUser._id});case 2:e=t.sent,0!==e.code||this.myUser.avatar||this.$store.dispatch("setUser",e.data);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){var t=this;weui.uploader("#uploaderMyAvatar",{url:u["a"].baseURL+"post/uploadimgaliyun",auto:!0,type:"file",fileVal:"image",compress:{width:1300,height:1300,quality:.8},onBeforeQueued:function(t){if(["image/jpg","image/jpeg","image/png","image/gif"].indexOf(this.type)<0)return weui.alert("请上传图片"),!1;this.size>10485760&&weui.alert("请上传不超过10M的图片")},onBeforeSend:function(t,e){e["wec-access-token"]=Object(l["a"])("token")},onSuccess:function(e){t.changeAvatarCallback(e)}})},methods:{changeAvatarCallback:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u["a"].post("users/update",{userId:this.myUser._id,avatar:e.data.url});case 2:n=t.sent,0===n.code&&(this.$store.dispatch("setUser",ct({},this.myUser,{avatar:e.data.url})),weui.toast("修改成功",1e3));case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),changeAvatar:function(){this.$refs.uploaderInputAvatar.click()},goChangeGender:function(){var t=this;weui.actionSheet([{label:"男",onClick:function(){t.changeGender(1)}},{label:"女",onClick:function(){t.changeGender(0)}}],[{label:"取消",onClick:function(){}}])},changeGender:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u["a"].post("users/update",{userId:this.myUser._id,gender:e});case 2:n=t.sent,0===n.code&&(this.$store.dispatch("setUser",ct({},this.myUser,{gender:e})),weui.toast("修改成功",1e3));case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),goChangeName:function(){this.$router.push({name:"changenickname",params:{name:this.myUser.nickname}})},goChangeDesc:function(){this.$router.push({name:"changedesc",params:{desc:this.myUser.desc}})},goChat:function(){this.$router.push({name:"chatlist",params:{}})}}},lt=ut,dt=(n("e5b9"),Object(p["a"])(lt,it,st,!1,null,"80ed4d2e",null)),ht=dt.exports,pt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("navHeader",{attrs:{title:"个人信息"}}),n("div",{staticClass:"weui-cells content"},[n("div",{staticClass:"panel person-info"},[n("a",{staticClass:"weui-cell",attrs:{href:"javascript:;"}},[n("img",{staticClass:"avatar",attrs:{src:t.currentUser.avatar,alt:"avatar"},on:{click:function(e){return t.showAvatar(t.currentUser.avatar)}}}),n("div",{staticClass:"person-info-right"},[n("p",{class:"1"==t.currentUser.gender?"male nickname":"female nickname"},[t._v(t._s(t.currentUser.nickname))]),n("p",{staticClass:"phone"},[t._v("Tel:"+t._s(t.currentUser.phoneNum))])])]),t.currentUser.desc?n("a",{staticClass:"weui-cell weui-cell_access",attrs:{href:"javascript:;"},on:{click:t.goChat}},[t._m(0),n("div",{staticClass:"desc-text"},[t._v(t._s(t.currentUser.desc))])]):t._e()]),n("div",{staticClass:"panel"},[n("a",{staticClass:"weui-cell weui-cell_access",attrs:{href:"javascript:;"},on:{click:t.goChat}},[t._m(1),n("div",{staticClass:"weui-cell__ft"})])])])],1)},ft=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"weui-cell__bd"},[n("p",{staticClass:"desc"},[t._v("个性签名")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"weui-cell__bd"},[n("div",{staticClass:"send-msg"},[n("div",{staticClass:"msg-icon"}),n("span",[t._v("发消息")])])])}],mt={name:"personpage",components:{navHeader:rt["a"]},props:{},data:function(){return{currentUser:{}}},created:function(){this.getInfor()},methods:{getInfor:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u["a"].get("users/userinfo",{userId:this.$route.query.id});case 2:e=t.sent,0===e.code&&(this.currentUser=e.data);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),showAvatar:function(t){new Slider({list:[{img:t,width:300,height:300}],page:0})},goChat:function(){this.$store.state.currentUser._id?this.$router.push({path:"/chat",query:{id:this.currentUser._id,name:this.currentUser.nickname}}):this.$router.push({name:"login"})}}},gt=mt,vt=(n("2716"),Object(p["a"])(gt,pt,ft,!1,null,"3b165bb1",null)),wt=vt.exports;i["a"].use(s["a"]);e["a"]=new s["a"]({mode:"history",base:"/",routes:[{path:"/",name:"wecircle",component:at},{path:"/login",name:"login",component:function(){return n.e("chunk-42494b2c").then(n.bind(null,"1364"))}},{path:"/publish",name:"publish",component:m},{path:"/mypage",name:"mypage",component:ht},{path:"/personpage",name:"personpage",component:wt},{path:"/changenickname",name:"changenickname",component:function(){return n.e("chunk-fc586510").then(n.bind(null,"55c8"))}},{path:"/changedesc",name:"changedesc",component:function(){return n.e("chunk-e4dda812").then(n.bind(null,"5178"))}},{path:"/chat",name:"chat",component:function(){return n.e("chunk-0d688173").then(n.bind(null,"6f29"))}},{path:"/chatlist",name:"chatlsit",component:function(){return n.e("chunk-3e9fd838").then(n.bind(null,"3dfc"))}}],scrollBehavior:function(t,e,n){return n||{x:0,y:0}}})},"56c8":function(t,e,n){"use strict";var a=n("050d"),i=n.n(a);i.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("transition",{attrs:{"enter-active-class":t.transitionNameIn,"leave-active-class":t.transitionNameOut,duration:t.duration},on:{beforeEnter:t.beforeEnter,afterEnter:t.afterEnter}},[n("router-view")],1)],1)},s=[],r=(n("7f7f"),n("f298")),o={name:"App",data:function(){return{transitionNameOut:"",transitionNameIn:"",duration:""}},created:function(){window.windowHeightOrgin=window.innerHeight,window.keyboardHeight=r["a"].getKeyBoardHeightDefault()-(window.screen.height-window.windowHeightOrgin)},methods:{beforeEnter:function(){},afterEnter:function(){}},watch:{$route:function(t,e){this.duration=500,"publish"===t.name||"login"===t.name?(this.transitionNameIn="animated faster slideInUp",this.transitionNameOut="slideOutIng"):"publish"===e.name||"login"===e.name?(this.transitionNameIn="",this.transitionNameOut="animated faster slideOutDown"):this.$router.backFlag?(this.transitionNameIn="animated faster slideInRight",this.transitionNameOut="animated faster slideOutLeft"):(this.transitionNameIn="animated faster slideInRight",this.transitionNameIn="animated faster slideOutLeft"),this.$router.backFlag=!1}}},c=o,u=(n("7faf"),n("2877")),l=Object(u["a"])(c,i,s,!1,null,null,null),d=l.exports,h=n("41cb"),p=n("2f62");a["a"].use(p["a"]);var f=new p["a"].Store({strict:!1,state:{currentUser:window.localStorage.getItem("cuser")?JSON.parse(window.localStorage.getItem("cuser")):{},wecircleDataList:[],closeCLPanelFlag:!0,keyword:""},mutations:{currentUser:function(t,e){t.currentUser=e,window.localStorage.setItem("cuser",JSON.stringify(e))},wecircleDataList:function(t,e){e.first?t.wecircleDataList=[]:t.wecircleDataList=t.wecircleDataList.concat(e)},addComment:function(t,e){for(var n=t.wecircleDataList,a=0;a<n.length;a++)n[a].id===e.pid&&n.comments.push({content:e.content,user:e.user})},addLike:function(t,e){for(var n=t.wecircleDataList,a=0;a<n.length;a++)n[a].id===e.pid&&(n[a].isLike=!0,n[a].likes.push({user:e.user}))},removeLike:function(t,e){for(var n=t.wecircleDataList,a=0;a<n.length;a++)if(n[a].id===e.pid){n[a].islike=!1;for(var i=[],s=0;s<n[a].likes.length;s++)n[a].likes[s].user._id!==e.user._id&&i.push(n[a].likes[s]);n[a].likes=i}},closeCLPanel:function(t,e){t.closeCLPanelFlag=e},setKeyword:function(t,e){t.keyword=e}},actions:{setUser:function(t,e){t.commit("currentUser",e)},setWecircleDataList:function(t,e){t.commit("wecircleDataList",e)},addComment:function(t,e){t.commit("addComment",e)},addLike:function(t,e){t.commit("addLike",e)},removeLike:function(t,e){t.commit("removeLike",e)},closeCLPanel:function(t,e){t.commit("closeCLPanel",e)},setKeyword:function(t,e){t.commit("setKeyword",e)}}}),m=n("0a12"),g=n.n(m),v=n("8055"),w=n.n(v),b=n("c40d"),_=(n("34ef"),n("a481"),n("14b9"),n("baf5"));function k(t){for(var e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),a=window.atob(n),i=new Uint8Array(a.length),s=0;s<a.length;++s)i[s]=a.charCodeAt(s);return i}_["install"]({onUpdateReady:function(){_["applyUpdate"]()},onUpdated:function(){weui.confirm("发现新版本，是否更新?",(function(){window.location.reload()}),(function(){}),{title:""})}}),navigator.serviceWorker||weui.topTips("请使用指定浏览器,体验前沿的技术"),navigator.serviceWorker&&navigator.serviceWorker.ready.then((function(t){var e="BHSpcTZY7MvELY7OD8pLrNM_a90auIL33JaP1ikq-Rzjl3Q_tVh1OJzdHAsNftl2RVRKlMpS1ovwXr6Kn9eH2cc";try{window.PushManager&&t.pushManager.getSubscription().then((function(n){if(!n&&window.localStorage.getItem("cuser"))t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:k(e)}).then((function(t){if(weui.topTips("获取到subscription"),t&&t.endpoint)b["a"].post("users/addsubscription",{subscription:JSON.stringify(t)})})).catch((function(t){weui.topTips(t)}));else weui.topTips("已经订阅过")}))}catch(n){console.log(n)}}));n("35a1"),n("6084"),n("641b");var C=n("3a34"),y=n.n(C);new y.a;a["a"].config.productionTip=!1,a["a"].prototype.$bus=new a["a"],a["a"].use(g.a,w()(b["a"].baseURL)),new a["a"]({router:h["a"],store:f,render:function(t){return t(d)}}).$mount("#app")},"59e9":function(t,e,n){t.exports=n.p+"static/img/topbg.398ef460.jpg"},6084:function(t,e,n){},"641b":function(t,e,n){},"6c0e":function(t,e,n){"use strict";var a=n("d255"),i=n.n(a);i.a},"7b2c":function(t,e,n){"use strict";n("c5f6");var a=function(t,e){return 2===e?t%4===0&&t%100!==0?29:28:e<=7&&e%2===1||e>7&&e%2===0?31:30},i=function(t,e){return new Date(t.getFullYear()+e,t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds())},s=function(t){var e,n,i=t.getMonth();return 11===i?new Date(t.getFullYear()+1,1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()):(e=a(t.getFullYear(),t.getMonth()+1),n=t.getDate(),n>e&&(n=e),new Date(t.getFullYear(),t.getMonth()+1,n,t.getHours(),t.getMinutes(),t.getSeconds()))},r=function(t,e){return e.setDate(e.getDate()-1),t.toDateString()==e.toDateString()},o=function(t,e){if(t=Number(t),!t||t<0)return"";e=e||new Date/1e3;var n,a=e-t,o=new Date(1e3*t),c=new Date(1e3*e);return a<=59?"刚刚":a<61?"1分钟前":a<3600?Math.floor(a/60)+"分钟前":a<86400?Math.floor(a/3600)+"小时前":r(o,c)?"昨天":s(o)>c?Math.ceil(a/86400)+"天前":i(o,1)>c?(n=o.getMonth()+1,n+"月"+o.getDate()+"日"):(n=o.getMonth()+1,o.getFullYear()+"年"+n+"月"+o.getDate()+"日")};e["a"]=o},"7faf":function(t,e,n){"use strict";var a=n("8fba"),i=n.n(a);i.a},"8cff":function(t,e,n){},"8e70":function(t,e,n){},"8fba":function(t,e,n){},"94ae":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header-bar scale-1px"},[n("p",{staticClass:"title"},[t._v(t._s(t.title))]),n("div",{staticClass:"left-icon",on:{click:t.goBack}})])},i=[],s={name:"navHeader",props:{title:String},methods:{goBack:function(){this.$router.backFlag=!0,this.$router.back()}}},r=s,o=(n("6c0e"),n("2877")),c=Object(o["a"])(r,a,i,!1,null,"2d286bc7",null);e["a"]=c.exports},a967:function(t,e,n){"use strict";var a=n("c4d0"),i=n.n(a);i.a},b2e5:function(t,e,n){},ba03:function(t,e,n){"use strict";var a=n("2a42"),i=n.n(a);i.a},c40d:function(t,e,n){"use strict";var a=n("bc3a"),i=n.n(a),s=n("41cb"),r=n("37b0"),o="/",c=i.a.create({baseURL:o,withCredentials:!0,timeout:3e4});function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c({url:t,methods:"get",headers:{"wec-access-token":Object(r["a"])("token")},params:e})}function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:t,method:"post",headers:{"Content-Type":"application/json;charset=UTF-8","wec-access-token":Object(r["a"])("token")},data:e};return c(n)}function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c({url:t,method:"put",headers:{"Content-Type":"application/json;charset=UTF-8"},data:JSON.stringify(e)})}c.interceptors.response.use((function(t){return 1e3===t.data.code?(s["a"].push({path:"login",name:"login",params:{}}),weui.topTips("请先登录"),window.localStorage.removeItem("cuser")):0!==t.data.code&&weui.topTips(t.data.msg||"接口请求失败"),t.data}),(function(t){return Promise.reject(t.response)})),e["a"]={get:u,post:l,put:d,baseURL:o,token:Object(r["a"])("token")}},c4d0:function(t,e,n){},c732:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap scale-1px-top"},[n("div",{staticClass:"input-content scale-1px"},[n("div",{staticClass:"input-wrap"},[n("input",{ref:"input",staticClass:"weui-input input-inner",attrs:{type:"text",placeholder:"请输入文本"},on:{focus:t.onfocus}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.option.noPlus,expression:"!option.noPlus"}],staticClass:"plus-btn",on:{click:t.showPanel}}),n("div",{staticClass:"create-btn weui-btn weui-btn_mini weui-btn_primary",on:{click:t.publish}},[t._v("发表")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.option.noPlus,expression:"!option.noPlus"}],staticClass:"opera-panel"},[n("div",{staticClass:"opera-item"},[n("div",{staticClass:"item-icon",on:{click:t.upload}}),n("p",{staticClass:"item-text"},[t._v("照片")]),n("div",{staticStyle:{display:"none"},attrs:{id:"uploader"}},[n("input",{ref:"uploader",staticClass:"weui-uploader__input",attrs:{type:"file",id:"uploaderInput",accept:"image/*"}})])])])])},i=[],s=n("c40d"),r={name:"inputBar",props:{data:Object,option:Object},data:function(){return{disabled:!1,currentData:{},uploadCount:0,panelShow:!1}},mounted:function(){var t=this;weui.uploader("#uploader",{url:s["a"].baseURL+"post/uploadimgaliyun",auto:!0,type:"file",fileVal:"image",compress:{width:1300,height:1300,quality:.8},onBeforeQueued:function(t){return["image/jpg","image/jpeg","image/png","image/gif"].indexOf(this.type)<0?(weui.alert("请上传图片"),!1):this.size>10485760?(weui.alert("请上传不超过10M的图片"),!1):t.length>1?(weui.alert("最多只能上传1张图片，请重新选择"),!1):void 0},onBeforeSend:function(t,e){e["wec-access-token"]=getCookie("token")},onSuccess:function(e){t.$emit("uploaded",e)}})},methods:{upload:function(){this.$refs.uploader.click()},publish:function(){this.$emit("publish",{value:this.$refs.input.value,data:this.currentData}),this.$refs.input.value=""},showPanel:function(){this.panelShow=!0,this.$emit("showBottom")},closePanel:function(){this.panelShow=!1},blurInput:function(){this.$refs.input.blur()},focusInput:function(t){this.currentData=t,this.$refs.input.focus()},onblur:function(){var t=this;setTimeout((function(){t.$bus.$emit("showInput",!1,t.data)}),90)},onfocus:function(){var t=this;this.option.onPlus||setTimeout((function(){if(!t.panelShow){var e=window.windowHeightOrgin-window.innerHeight;e>0&&(window.keyboardHeight=e-(window.screen.height-window.windowHeightOrgin))}t.$emit("hideBottomOnPanel")}),200)}}},o=r,c=(n("e92c"),n("2877")),u=Object(c["a"])(o,a,i,!1,null,"650bddd8",null);e["a"]=u.exports},c8a6:function(t,e,n){},d255:function(t,e,n){},e5b9:function(t,e,n){"use strict";var a=n("0b17"),i=n.n(a);i.a},e92c:function(t,e,n){"use strict";var a=n("b2e5"),i=n.n(a);i.a},ec3f:function(t,e,n){},f298:function(t,e,n){"use strict";n("4917");var a=navigator.userAgent,i=a.indexOf("Android")>-1||a.indexOf("Linux")>-1,s=!!a.match(/\(i[^;]+;( U;)? CPU.+Mac OS X\)/),r=736==window.screen.height&&414==window.screen.width;e["a"]={isIOS:s,isAndroid:i,isIpP:r,getKeyBoardHeightDefault:function(){if(s){var t=window.screen;return 812==t.height&&375==t.width?377:736==t.height&&414==t.width?315:667==t.height&&375==t.width?304:568==t.height&&320==t.width?297:304}return 304}}},fd42:function(t,e,n){"use strict";var a=n("c8a6"),i=n.n(a);i.a}});
//# sourceMappingURL=app.a6676d99.js.map