(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42494b2c"],{1118:function(e,t,a){"use strict";var i=a("5beb"),s=a.n(i);s.a},1364:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"close",on:{click:e.close}}),a("p",{staticClass:"title"},[e._v("手机号登录")]),a("div",{staticClass:"weui-cell weui-cell_vcode"},[e._m(0),a("div",{staticClass:"weui-cell__bd"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.phoneNum,expression:"phoneNum"}],staticClass:"weui-input",attrs:{maxlength:"11",type:"tel",pattern:"^\\d{11}$",placeholder:"请输入手机号"},domProps:{value:e.phoneNum},on:{input:function(t){t.target.composing||(e.phoneNum=t.target.value)}}})]),a("div",{staticClass:"weui-cell__ft"},[a("button",{directives:[{name:"show",rawName:"v-show",value:60==e.timeCode,expression:"timeCode == 60"}],staticClass:"weui-vcode-btn",on:{click:e.getCode}},[e._v("获取验证码")]),a("div",{directives:[{name:"show",rawName:"v-show",value:60!=e.timeCode,expression:"timeCode != 60"}],staticClass:"time-code weui-vcode-btn"},[e._v(e._s(e.timeCode)+"s")])])]),a("div",{staticClass:"weui-cell weui-cell_vcode vcode-input scale-1px"},[e._m(1),a("div",{staticClass:"weui-cell__bd"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],staticClass:"weui-input",attrs:{type:"number",placeholder:"请输入验证码"},domProps:{value:e.code},on:{input:function(t){t.target.composing||(e.code=t.target.value)}}})])]),e.needCaptcha?a("div",{staticClass:"weui-cell weui-cell_vcode captcha-code"},[e._m(2),a("div",{staticClass:"weui-cell__bd"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.captcha,expression:"captcha"}],staticClass:"weui-input",attrs:{type:"number",placeholder:"请输入验证码"},domProps:{value:e.captcha},on:{input:function(t){t.target.composing||(e.captcha=t.target.value)}}})]),a("div",{staticClass:"weui-cell__ft"},[a("img",{staticClass:"weui-vcode-img",attrs:{src:e.captchaUrl},on:{click:e.reloadCaptcha}})])]):e._e(),a("a",{staticClass:"weui-btn weui-btn_primary",attrs:{href:"javascript:"},on:{click:e.signUp}},[e._v("确定")])])},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"weui-cell__hd"},[a("label",{staticClass:"weui-label"},[e._v("手机号")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"weui-cell__hd"},[a("label",{staticClass:"weui-label"},[e._v("验证码")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"weui-cell__hd"},[a("label",{staticClass:"weui-label"},[e._v("图形验证码")])])}],c=(a("96cf"),a("3b8d")),n=a("c40d"),r={name:"login",data:function(){return{phoneNum:"",timeCode:60,code:"",captcha:"",captchaUrl:n["a"].baseURL+"users/captcha",needCaptcha:!1}},methods:{close:function(){this.$router.go(-1)},getCode:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(/^\d{11}$/.test(this.phoneNum)){e.next=3;break}return weui.topTips("请输入正确手机号"),e.abrupt("return");case 3:if(!this.phoneNum){e.next=8;break}return e.next=6,n["a"].get("/users/phonecode",{phoneNum:this.phoneNum});case 6:t=e.sent,0===t.code&&(weui.toast("验证码已发送",1e3),this.countTimeCode());case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),signUp:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.phoneNum||!this.code){e.next=4;break}if(/^\d{11}$/.test(this.phoneNum)){e.next=4;break}return weui.topTips("请输入正确手机号"),e.abrupt("return");case 4:return e.next=6,n["a"].post("users/signup",{phonenum:this.phoneNum,code:this.code,captcha:this.captcha});case 6:if(t=e.sent,0!==t.code){e.next=16;break}if("needCaptcha"!==t.data.code){e.next=12;break}return this.needCaptcha=!0,weui.topTips("操作频繁，请输入图形验证码"),e.abrupt("return");case 12:this.$store.dispatch("setUser",t.data),this.$router.go(-1),e.next=17;break;case 16:weui.topTips("请输入验证码或手机号码");case 17:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),readloadCaptcha:function(){this.captchaUrl=n["a"].baseURL+"users/captcha?"+Date.now()},countTimeCode:function(){var e=this;this.clearFlag=setInterval((function(){if(0==e.timeCode)return e.timeCode=60,void clearInterval(e.clearFlag);e.timeCode--}),1e3)}},beforeDestroy:function(){clearInterval(this.clearFlag)}},o=r,u=(a("1118"),a("2877")),l=Object(u["a"])(o,i,s,!1,null,"49c29586",null);t["default"]=l.exports},"5beb":function(e,t,a){}}]);
//# sourceMappingURL=chunk-42494b2c.054fa3c6.js.map